// Automatically generated by xdrgen
// DO NOT EDIT or your changes may be overwritten

namespace stellar_dotnet_sdk.xdr;

// === xdr source ============================================================

//  union TxSetComponent switch (TxSetComponentType type)
//  {
//  case TXSET_COMP_TXS_MAYBE_DISCOUNTED_FEE:
//    struct
//    {
//      int64* baseFee;
//      TransactionEnvelope txs<>;
//    } txsMaybeDiscountedFee;
//  };

//  ===========================================================================
public class TxSetComponent
{
    public TxSetComponentType Discriminant { get; set; } = new();

    public TxSetComponentTxsMaybeDiscountedFee TxsMaybeDiscountedFee { get; set; }

    public static void Encode(XdrDataOutputStream stream, TxSetComponent encodedTxSetComponent)
    {
        stream.WriteInt((int)encodedTxSetComponent.Discriminant.InnerValue);
        switch (encodedTxSetComponent.Discriminant.InnerValue)
        {
            case TxSetComponentType.TxSetComponentTypeEnum.TXSET_COMP_TXS_MAYBE_DISCOUNTED_FEE:
                TxSetComponentTxsMaybeDiscountedFee.Encode(stream, encodedTxSetComponent.TxsMaybeDiscountedFee);
                break;
        }
    }

    public static TxSetComponent Decode(XdrDataInputStream stream)
    {
        var decodedTxSetComponent = new TxSetComponent();
        var discriminant = TxSetComponentType.Decode(stream);
        decodedTxSetComponent.Discriminant = discriminant;
        switch (decodedTxSetComponent.Discriminant.InnerValue)
        {
            case TxSetComponentType.TxSetComponentTypeEnum.TXSET_COMP_TXS_MAYBE_DISCOUNTED_FEE:
                decodedTxSetComponent.TxsMaybeDiscountedFee = TxSetComponentTxsMaybeDiscountedFee.Decode(stream);
                break;
        }

        return decodedTxSetComponent;
    }

    public class TxSetComponentTxsMaybeDiscountedFee
    {
        public Int64 BaseFee { get; set; }
        public TransactionEnvelope[] Txs { get; set; }

        public static void Encode(XdrDataOutputStream stream,
            TxSetComponentTxsMaybeDiscountedFee encodedTxSetComponentTxsMaybeDiscountedFee)
        {
            if (encodedTxSetComponentTxsMaybeDiscountedFee.BaseFee != null)
            {
                stream.WriteInt(1);
                Int64.Encode(stream, encodedTxSetComponentTxsMaybeDiscountedFee.BaseFee);
            }
            else
            {
                stream.WriteInt(0);
            }

            var txssize = encodedTxSetComponentTxsMaybeDiscountedFee.Txs.Length;
            stream.WriteInt(txssize);
            for (var i = 0; i < txssize; i++)
                TransactionEnvelope.Encode(stream, encodedTxSetComponentTxsMaybeDiscountedFee.Txs[i]);
        }

        public static TxSetComponentTxsMaybeDiscountedFee Decode(XdrDataInputStream stream)
        {
            var decodedTxSetComponentTxsMaybeDiscountedFee = new TxSetComponentTxsMaybeDiscountedFee();
            var BaseFeePresent = stream.ReadInt();
            if (BaseFeePresent != 0) decodedTxSetComponentTxsMaybeDiscountedFee.BaseFee = Int64.Decode(stream);
            var txssize = stream.ReadInt();
            decodedTxSetComponentTxsMaybeDiscountedFee.Txs = new TransactionEnvelope[txssize];
            for (var i = 0; i < txssize; i++)
                decodedTxSetComponentTxsMaybeDiscountedFee.Txs[i] = TransactionEnvelope.Decode(stream);
            return decodedTxSetComponentTxsMaybeDiscountedFee;
        }
    }
}